(function(){function m(a){try{if(g=a,!n){n=!0;try{var c="https://realtime.getbeamer.com/?product="+_productId;"undefined"!==typeof g&&""!==g&&(c+="&user="+encodeURIComponent(g));f=("object"==typeof exports&&"function"==typeof exports.io?exports.io:window.io)(c,{reconnectionDelay:12E4,reconnectionDelayMax:6E5,reconnectionAttempts:5,randomizationFactor:.8,transports:["websocket"]});f.on("update",function(b){var d=!1;if("string"===typeof b||b instanceof String){var e=b.split(":");1<e.length&&(b=parseInt(e[0]),d="immediate"===e[1])}b>q&&(q=b,b="updatesAvailable",d&&(b+=":"+JSON.stringify({immediate:!0})),window.parent.postMessage(b,"*"))});f.on("connect_error",function(b){h();setTimeout(function(){m(a)},12E4)});f.on("connect_failed",function(b){h();setTimeout(function(){m(a)},12E4)});f.on("reconnect_failed",function(){h();p()})}catch(b){r(b),h(),p()}}}catch(b){r(b),h(),p()}}function h(){"undefined"!==typeof f&&(f.disconnect(),delete f);n=!1}function p(a){window.parent.postMessage("prepareAutoRefresh","*")}
function r(a){try{var c="undefined"!==typeof a.stack?a.stack:"undefined"!==typeof a.toString?a.toString():a.message}catch(d){c=a.message}a=(new Date).getTime();var b="https://functions.getbeamer.com/log?error="+encodeURIComponent(c);b+="&productId="+encodeURIComponent(_productId);"undefined"!==typeof g&&""!==g&&(b+="&userId="+encodeURIComponent(g));lastError={error:c,time:a};t(b,null,null,"POST")}function t(a,c,b,d,e){"undefined"===typeof e&&(e=0);if("undefined"===typeof d||""===d.trim())d="GET";if("POST"===d&&0<a.indexOf("?")){var l=a.split("?");a=l[0];l=l[1]}var k=new XMLHttpRequest;k.onreadystatechange=function(){if(4==this.readyState)if(200==this.status)"undefined"!==typeof c&&c&&c(this.responseText);else if(400>this.status||403<this.status)5>e?setTimeout(function(){t(a,c,b,d,e)},6E4*e):"undefined"!==typeof b&&b&&b(this.responseText)};k.crossDomain=!0;k.open(d,a,!0);k.withCredentials=!1;"POST"===d&&l&&k.setRequestHeader("Content-Type","application/x-www-form-urlencoded");k.send(l);e++}
var q=(new Date).getTime(),f,g,n=!1;window.console.error=function(){};window.console.warn=function(){};(function(){window.addEventListener("message",function(a){if(a.data&&"string"===typeof a.data&&"{"!==a.data[0]&&-1<a.data.indexOf(":"))try{var c=a.data.indexOf(":");var b=a.data.substring(0,c);var d=a.data.substr(c+1)}catch(e){return}else b=a.data;"initUpdatesListener"==b?m(d):"stopUpdatesListener"==b&&h()},!1)})()})();